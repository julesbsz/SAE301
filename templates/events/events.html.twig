{% extends 'base.html.twig' %}

{% block title %}Événements{% endblock %}

{% block body %}
    <header>
        <span><a href="/">Accueil</a> / Événements</span>
        <h1>Nos Événements</h1>
    </header>

{#    <section class="search">#}
{#        <input type="search" placeholder="Rechercher un événement, un genre ou une date...">#}
{#    </section>#}

    <section class="events">
        {% for event in events %}
            <article class="event">
                <img class="{{ 'link-' ~ event.id }}" src="{{ asset("build/" ~ event.image) }}" alt={{ event.name }}>
                <div>
                    <h2>{{ event.name }}</h2>
                    <span>{{ event.date }}<p>Avec une capacité de : </p>{{ event.genre }}</span>
                    <p>{{ event.description }}</p>
                    <a class="button" href="{{ path('app_events', {id: event.id}) }}">En savoir plus</a>
                </div>
            </article>
        {% endfor %}
    </section>

    <script>
        const links = [];

        document.querySelectorAll('.event').forEach(event => {
            links.push(event.querySelector('img').classList[0]);
        });

        links.forEach(link => {
            document.querySelector('.' + link).addEventListener('click', () => {
                window.location.href = '/evenements/' + link.split('-')[1];
            });
        });
    </script>
{% endblock %}
